<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
        <meta charset="utf-8" />
        <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.1/angular.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" />
        <title>Angular JS etst file...</title>
    </head>
    <body class="container-fluid">
        
        <div class="col-md-3"></div>
        <div class="col-md-6">
        <h1 class="text-center page-header">Aplicación de mercados de CRRC</h1>
        <form class="form-inline" novalidate data-ng-app="mercado" data-ng-controller = "mercadoController">
            <div >
                <input type="text" data-ng-model="linea.articulo" placeholder="Artículo" class="form-control" />
                <input type="number" data-ng-model="linea.cantidad" placeholder="Cantidad" class="form-control"/>
                <input type="number" data-ng-model="linea.precio" class="form-control" placeholder="Precio Unitario"/>
                <button class="btn btn-primary" data-ng-click="agregarArticulo()">
                    Agregar registro <span class="glyphicon glyphicon-plus"></span>
                </button> 
            </div>
            <hr>
            <table class="table table-condensed table-hover table-bordered">
                <thead>
                    <tr class="success">
                        <th>#</th>
                        <th class="text-center">Artículo</th>
                        <th class="text-center">Cantidad</th>
                        <th class="text-center">Precio</th>
                        <th class="text-center">Total Artículo</th>
                        <th class="text-center">Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <tr data-ng-repeat = "registro in listaDeCompras">
                        <td data-ng-bind="$index + 1"></td>
                        <td> 
                            <span data-ng-if="filaEditable != $index" data-ng-bind="registro.articulo"></span> 
                            <input type="text" data-ng-model="registro.articulo"
                                   data-ng-if="filaEditable == $index" />
                        </td>
                        <td class="text-right" >
                            <span data-ng-if="filaEditable != $index" 
                                  data-ng-bind="registro.cantidad"></span>
                            <input type="number" data-ng-model="registro.cantidad"
                                   data-ng-if="filaEditable == $index" />
                        </td>
                        <td class="text-right" >
                            <span data-ng-if="filaEditable != $index" 
                                  data-ng-bind="registro.precio|currency">
                            </span>
                            <input type="number" data-ng-model="registro.precio"
                                   data-ng-if="filaEditable == $index" />
                        
                        </td>
                        <td class="text-right" data-ng-bind="registro.cantidad * registro.precio|currency"></td>
                        <td>
                            <a data-toggle="tooltip" data-placement="top" 
                               title="Editar"
                               class="btn btn-success"
                               data-ng-if="filaEditable != $index"
                               data-ng-click="setFilaEditable($index);">
                                <span class="glyphicon glyphicon-pencil">
                                </span>
                            </a>
                            <a data-toggle = "tooltip" data-placement = "top"
                                title = "Aceptar cambios"
                                class="btn btn-info"
                                data-ng-if="filaEditable == $index"
                                data-ng-click="setFilaEditable(-1)">
                                <span class="glyphicon glyphicon-ok">
                                </span>
                            </a>
                            
                            <a  data-toggle="tooltip" data-placement="top"
                               title = "Borrar"
                               class="btn btn-danger" 
                               data-ng-click="borrar(registro.articulo)">
                                <span class="glyphicon glyphicon-remove">
                                </span>
                            </a>
                        </td>
                    </tr>
                    <tr>
                        <td><strong>TOTAL</strong></td><td></td><td></td><td></td>
                        <td class="text-right"> <strong>{{totalizar()|currency}}</strong></td>
                    </tr>
                </tbody>
            </table>
           <!-- <p>{{listaDeCompras}}</p>
            <p>{{filaEditable}}</p> -->
        </form>
            </div>
        <script src="app.js"></script>
        <script>
            $(document).ready(
                function(){
                    $('[data-toggle="tooltip"]').tooltip({'placement':'top'});
                });
        </script>
    </body>
</html>
